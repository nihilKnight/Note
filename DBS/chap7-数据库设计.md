# 数据库设计

- [数据库设计概述](#数据库设计概述)
- [需求分析](#需求分析)
- [概念结构设计](#概念结构设计)
- [逻辑结构设计](#逻辑结构设计)
- [物理结构设计](#物理结构设计)

## 数据库设计概述

1. 数据库设计：对于一个给定的应用环境，构造（分析、设计）**优化**的数据库**逻辑模式**和**物理结构**，并据此建立数据库及其应用系统，使之能够有效地存储和管理数据，满足各种用户应用需求，包括**信息管理要求**和**数据操作**要求。

2. 设计目标：为用户和各种应用系统提供一个**信息基础设施**和**高效**的运行环境。

3. 数据模型与概念模型：
    - **概念模型**：表达信息世界的模型，信息世界是对现实世界的理解与抽象；
    - **数据模型**：表达计算机世界的模型。
    - 现实世界 -> 信息世界（概念模型；概念层）-> 计算机世界（数据模型；逻辑层、物理层）。

4. 数据库设计基本步骤：需求分析 -> 概念结构设计 -> 逻辑结构设计 -> 物理结构设计 -> 数据库的实施和维护。
    - 需求分析和概念设计独立于数据库管理系统；
    - **逻辑设计**和**物理设计**与选用的数据库管理系统密切相关。

## 需求分析

5. 需求分析调查任务：（1）信息要求；（2）处理要求；（3）安全性与完整性要求。

6. 调查用户需求的步骤：调查组织机构情况 -> 调查各部门的业务活动情况 -> 协助用户明确对新系统的各种要求 -> 确定新系统的边界。

7. 数据字典：关于数据库中**数据的描述**，即元数据，不是数据本身。数据字典通过对数据项和数据结构的定义，来描述数据流、数据存储的逻辑内容。
    - 内容：数据项、数据结构、数据流、数据存储、处理过程。
        - 数据项：不可再分的最小数据单位；
        - 数据结构：反应数据间的组合关系，由若干个数据项或数据结构组成；
        - 数据流：数据结构在系统内传输的路径；
        - 数据存储：数据结构停留或保存的地方，也是数据流来源和去向之一。

## 概念结构设计

8. E-R模型：世界由一组称作**实体**的基本对象和这些对象之间的**联系**构成的。

9. 概念结构设计：在深入理解需求的基础上，分析系统中存在的各种主要实体、属性和联系（关系）。
    - **主要实体**的发现、划分和定义；
    - **实体主要属性**的发现、分析和定义；
    - **实体之间联系**的发现、分析和定义。
        - **一对一**、**一对多**、**多对多**。

## 逻辑结构设计

10. 逻辑结构设计：将概念结构设计阶段的基本E-R图，转化为与选用数据库管理系统产品所支持的数据类型相符合的逻辑结构。

11. 数据模型的优化步骤：
    1. 确定数据依赖；
    2. 对各个关系模式之间的数据依赖进行极小化处理；
    3. 按照**数据依赖理论**对关系模式进行分析；
    4. 根据数据处理需求确定是否进行模式的合并与分解；
    5. 对关系模式进行必要分解，提高操作效率与空间利用率。

## 物理结构设计

12. 物理结构设计：为一个给定的逻辑数据模型选取一个**适合**应用要求的物理结构的过程，就是数据库的物理设计。
    - 物理结构：数据库在物理设备上的**存储结构**与**存取方法**称为数据库的物理结构，依赖于选定的数据库管理系统。

13. 数据库物理设计步骤：
    1. 建立数据库schema结构（**建库脚本**）；
    2. 确定数据库物理结构（存取方法和存储结构）；
    3. 对物理结构进行评价（**时间和空间效率**）；
    4. **必要的数据库反规范化冗余设计**。

14. 关系数据库物理设计内容：（1）为关系模式**选择存取方法（建立存取路径，即索引设计）**；（2）设计**关系**、**索引**等数据库文件的**物理存储结构**。

15. 数据库管理系统**常用存取方法**：（1）**B+树索引存取方法**；（2）**Hash索引存取方法**；（3）**聚簇存取方法**。
    - B+树索引选择一般规则：查询条件、聚集函数参数、连接条件、排序；
    - Hash索引选择一般规则：等值连接、等值条件。

16. 评价指标：（1）存储空间；（2）存取时间；（3）维护代价。
