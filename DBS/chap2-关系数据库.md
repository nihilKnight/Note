# 关系数据库

- [关系数据结构及形式化定义](#关系数据结构及形式化定义)
- [关系操作](#关系操作)
- [关系的完整性](#关系的完整性)
- [关系代数](#关系代数)

## 关系数据结构及形式化定义

1. （候选）键/码：某个关系的一组属性所组成的集合，满足：
    1. 该属性集合始终能够确保在关系中**唯一标识一个元组**；
    2. 该属性集合的**任意真子集不满足条件1**。
    - 将满足上述第1个条件的属性集合称为**超键**，因此候选键可定义为**最小超键**。

2. 基本规范条件：**关系的每一个分量必须是一个不可分的数据项**。

3. 三类关系：（1）**基本关系**（基本表）；（2）**查询表**；（3）**视图表**。

4. 关系模式：是关系的**结构**，是对关系的描述。
    - 关系模式是稳定的；关系是关系模式在某一时刻的值，是随时间变化的。

5. 关系数据库：在一个给定的应用领域中，**所有关系的集合**构成一个关系数据库。
    - 型与值：关系数据库模式是**型**；若干关系模式在某一时刻对应的关系的集合是**值**。

## 关系操作

6. 基本操作：**选择、投影、并、差、笛卡儿积**。
    - 操作的对象是**集合**。
    - 其他操作：除、连接、交。

7. 关系数据语言：（1）关系代数语言（如ISBL）；（2）（元组/域）关系演算语言；（3）具有关系代数和关系演算双重特点的语言（如SQL）。

## 关系的完整性

8. 关系的两个**不变性**：**实体完整性**和**参照完整性**。
    - 关系模型必须满足的完整性约束条件，应由关系系统自动支持。

9. 用户定义的完整性：应用领域需要遵循的约束条件，体现了具体领域中的语义约束。

## 关系代数

10. 关系代数：用对关系的运算来表达查询。
    - 传统集合运算：交、并、差、笛卡儿积。
    - 专门关系运算：选择、投影、连接、除。

11. 投影运算特点：投影之后不仅取消了原关系中的某些列，而且还**可能取消某些元组（避免重复行）**。

12. 自然连接：一种**特殊的等值连接**，在**结果中把重复的属性列去掉**。

13. 悬浮元组：两个关系$R$和$S$在做**自然连接**时，一者中某些元组可能在另一者中**不存在公共属性上值相等的元组**，从而造成这些元组在操作时被舍弃了。这些被舍弃的元组称为**悬浮元组**。

14. 外连接：把悬浮元组也保存在结果关系中，其他属性上填空值。
    - 左外连接：只保存左边关系的悬浮元组；
    - 右外连接：只保存左边关系的悬浮元组；

15. 除运算：
    > 给定关系$R(X,Y),S(Y,Z)$，设关系$R$除以关系$S$的结果为关系$T$，则$T$的定义为：
    > $$
    > \begin{aligned}
    > R\div S&=\{t_r[X]|t_r\in R\wedge\Pi_Y(S)\subset Y_x\},\\ Y_x&=\{t[Y]|t\in R,t[X]=x\}
    > \end{aligned}
    > $$
    > $T$包含了**所有在**$R$**但不在**$S$**中的属性及其值**，且$T$**的元组与**$S$**的元组的所有组合都在**$R$**中**。
    - 除运算经常用于求解“**查询...至少/全部的/所有的...**”问题。
    - 用基本操作表示：$R\div S=\Pi_X(R)-\Pi_X(R-\Pi_X(R)\times\Pi_Y(S))$。
